# Exemplo de configuração do docker-compose.yml para usar o Deploy Agent
# 
# IMPORTANTE: Este é um arquivo de EXEMPLO. Não substitua seu docker-compose.yml atual!
# Use apenas como referência para adicionar as variáveis de ambiente necessárias.
#
# O Deploy Agent NÃO roda em container - ele roda diretamente no HOST.
# Este arquivo apenas mostra como configurar o container do MultiMax para se comunicar com o Deploy Agent.

version: '3.8'

services:
  multimax:
    # ... outras configurações ...
    
    environment:
      # Configuração do Deploy Agent (obrigatório)
      - DEPLOY_AGENT_URL=http://127.0.0.1:9000
      
      # Token de autenticação (opcional - configure se usar token no Deploy Agent)
      # - DEPLOY_AGENT_TOKEN=seu-token-secreto-aqui
      
      # ... outras variáveis de ambiente ...
    
    # IMPORTANTE: Para que o container possa acessar 127.0.0.1:9000 do HOST,
    # você precisa de uma das seguintes opções:
    
    # OPÇÃO 1: Usar network_mode: host (recomendado para acesso a 127.0.0.1)
    # network_mode: host
    
    # OPÇÃO 2: Usar extra_hosts para mapear host.docker.internal
    # extra_hosts:
    #   - "host.docker.internal:host-gateway"
    # E então mudar DEPLOY_AGENT_URL para: http://host.docker.internal:9000
    
    # OPÇÃO 3: Se usar Docker bridge network, você pode precisar acessar via IP do HOST
    # Exemplo: DEPLOY_AGENT_URL=http://172.17.0.1:9000
    # (não recomendado - menos seguro)
