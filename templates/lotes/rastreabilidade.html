{% extends 'base.html' %}
{% block title %}Rastreabilidade — MultiMax{% endblock %}
{% block content %}
<div class="mm-page-header">
    <h1 class="mm-page-title">Rastreabilidade: {{ lote.lote_codigo }}</h1>
    <a href="{{ url_for('lotes.detalhes', id=lote.id) }}" class="mm-btn mm-btn-secondary">Voltar</a>
</div>

<div class="mm-card">
    <h3 class="mm-card-title">Histórico Completo</h3>
    <div class="mm-timeline mm-mt-4">
        {% for reg in registros %}
        <div class="mm-timeline-item">
            <div class="mm-timeline-marker"></div>
            <div class="mm-timeline-content">
                <h4>{{ reg.etapa|title }}</h4>
                <p><strong>Data:</strong> {{ reg.data_etapa.strftime('%d/%m/%Y %H:%M') }}</p>
                <p><strong>Responsável:</strong> {{ reg.responsavel or '-' }}</p>
                {% if reg.temperatura %}
                <p><strong>Temperatura:</strong> {{ reg.temperatura }}°C</p>
                {% endif %}
                {% if reg.observacao %}
                <p><strong>Observação:</strong> {{ reg.observacao }}</p>
                {% endif %}
            </div>
        </div>
        {% else %}
        <p class="mm-text-muted">Nenhum registro de rastreabilidade</p>
        {% endfor %}
    </div>
</div>
{% endblock %}

