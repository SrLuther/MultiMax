{% extends 'base.html' %}
{% block title %}Arquivar Jornada — MultiMax{% endblock %}

{% block content %}
<div class="container-fluid" style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
    <div class="card shadow-sm">
        <div class="card-header bg-danger text-white">
            <h4 class="mb-0">
                <i class="bi bi-archive"></i>
                Arquivar Dados da Jornada
            </h4>
        </div>
        <div class="card-body">
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i>
                <strong>Atenção!</strong> Esta ação irá:
                <ul class="mb-0 mt-2">
                    <li>Copiar todos os registros do período especificado para o arquivo</li>
                    <li><strong>Deletar permanentemente</strong> todos os registros do período</li>
                    <li>Reiniciar os contadores de horas e folgas de todos os colaboradores</li>
                </ul>
                <strong class="mt-2 d-block">Esta ação não pode ser desfeita!</strong>
            </div>

            <form method="POST" action="{{ url_for('jornada.arquivar') }}">
                <div class="mb-3">
                    <label for="period_start" class="form-label">
                        <i class="bi bi-calendar-event"></i>
                        Data de Início do Período
                    </label>
                    <input type="date" 
                           class="form-control" 
                           id="period_start" 
                           name="period_start" 
                           value="{{ suggested_start.strftime('%Y-%m-%d') if suggested_start else '' }}"
                           required>
                </div>

                <div class="mb-3">
                    <label for="period_end" class="form-label">
                        <i class="bi bi-calendar-event-fill"></i>
                        Data de Fim do Período
                    </label>
                    <input type="date" 
                           class="form-control" 
                           id="period_end" 
                           name="period_end" 
                           value="{{ suggested_end.strftime('%Y-%m-%d') if suggested_end else '' }}"
                           required>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">
                        <i class="bi bi-card-text"></i>
                        Descrição (opcional)
                    </label>
                    <textarea class="form-control" 
                              id="description" 
                              name="description" 
                              rows="3"
                              placeholder="Ex: Arquivo do primeiro semestre de 2024"></textarea>
                </div>

                <div class="d-flex gap-2 justify-content-end">
                    <a href="{{ url_for('jornada.index') }}" class="btn btn-secondary">
                        <i class="bi bi-x-circle"></i>
                        Cancelar
                    </a>
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja arquivar os dados? Esta ação não pode ser desfeita!');">
                        <i class="bi bi-archive"></i>
                        Arquivar Dados
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

