{% extends 'base.html' %}
{% block title %}Editar Registro de Jornada — MultiMax{% endblock %}
{% block breadcrumb %}
<span class="mm-breadcrumb-separator">/</span>
<a href="{{ url_for('jornada.index') }}">Jornada</a>
<span class="mm-breadcrumb-separator">/</span>
<span>Editar</span>
{% endblock %}

{% block content %}
<div class="mm-page-header mm-mb-6">
    <h1 class="mm-page-title">
        <i class="bi bi-pencil mm-text-primary"></i>
        Editar Registro de Jornada
    </h1>
    <p class="mm-text-muted">Atualize as informações do registro</p>
</div>

<div class="mm-card">
    <div class="mm-card-body">
        <form method="POST">
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Colaborador</label>
                    <input type="text" class="form-control" value="{{ record.collaborator.name }}" disabled>
                    <small class="form-text text-muted">Não é possível alterar o colaborador</small>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Data <span class="text-danger">*</span></label>
                    <input type="date" name="date" class="form-control" required value="{{ record.date.strftime('%Y-%m-%d') }}">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Tipo</label>
                    <input type="text" class="form-control" value="{{ record.record_type }}" disabled>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Origem</label>
                    <input type="text" class="form-control" value="{{ record.origin or '-' }}" disabled>
                </div>
                {% if record.record_type == 'horas' %}
                <div class="col-md-6">
                    <label class="form-label">Horas</label>
                    <input type="number" name="hours" class="form-control" step="0.01" value="{{ record.hours or 0 }}">
                </div>
                {% elif record.record_type in ('folga_adicional', 'folga_usada') %}
                <div class="col-md-6">
                    <label class="form-label">Dias</label>
                    <input type="number" name="days" class="form-control" value="{{ record.days or 1 }}">
                </div>
                {% elif record.record_type == 'conversao' %}
                <div class="col-md-6">
                    <label class="form-label">Dias</label>
                    <input type="number" name="days" class="form-control" value="{{ record.days or 0 }}">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Valor Pago (R$)</label>
                    <input type="number" name="amount_paid" class="form-control" step="0.01" value="{{ record.amount_paid or 0 }}">
                </div>
                {% endif %}
                <div class="col-12">
                    <label class="form-label">Observações</label>
                    <textarea name="notes" class="form-control" rows="3">{{ record.notes or '' }}</textarea>
                </div>
            </div>
            <div class="mm-flex mm-gap-2 mm-mt-4">
                <button type="submit" class="mm-btn mm-btn-primary">
                    <i class="bi bi-check-lg"></i>
                    Salvar Alterações
                </button>
                <a href="{{ url_for('jornada.index', collaborator_id=record.collaborator_id) }}" class="mm-btn mm-btn-outline">
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}




