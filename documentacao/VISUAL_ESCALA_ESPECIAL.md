# ğŸ¯ Sistema de Escalas Especiais - VisÃ£o Geral Visual

## ğŸ“Š Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NAVEGADOR DO USUÃRIO                       â”‚
â”‚                   /escala-especial/                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   PÃ¡gina HTML                         â”‚   â”‚
â”‚  â”‚  - Modal criar escala                                â”‚   â”‚
â”‚  â”‚  - Modal editar escala                               â”‚   â”‚
â”‚  â”‚  - Cards visuais com cores                           â”‚   â”‚
â”‚  â”‚  - Abas de filtro                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ fetch() / AJAX
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FLASK BACKEND                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Blueprint: escala_especial_api                â”‚   â”‚
â”‚  â”‚        URL: /api/escala-especial/                    â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  âœ“ GET    /                  - Listar              â”‚   â”‚
â”‚  â”‚  âœ“ POST   /                  - Criar               â”‚   â”‚
â”‚  â”‚  âœ“ GET    /{id}              - Obter               â”‚   â”‚
â”‚  â”‚  âœ“ PUT    /{id}              - Atualizar           â”‚   â”‚
â”‚  â”‚  âœ“ DELETE /{id}              - Deletar             â”‚   â”‚
â”‚  â”‚  âœ“ GET    /tipos             - Tipos               â”‚   â”‚
â”‚  â”‚  âœ“ GET    /criterios         - CritÃ©rios           â”‚   â”‚
â”‚  â”‚  âœ“ POST   /aplicar/{id}      - Aplicar             â”‚   â”‚
â”‚  â”‚  âœ“ POST   /remover/{id}      - Remover             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ SQLAlchemy ORM
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BANCO DE DADOS (SQLite/PostgreSQL)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Tabela: escala_especial                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚ id (PK)                                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ nome                                    â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ descricao                               â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ tipo (INDEX)                            â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ data_inicio (INDEX)                     â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ data_fim                                â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ turno_customizado                       â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ criterio_atribuicao                     â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ equipe_id (FK â†’ setor)                  â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ numero_pessoas                          â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ colaboradores_selecionados (JSON)       â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ ativo (INDEX)                           â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ criado_em                               â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ atualizado_em                           â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ criado_por                              â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Tabela: shift (existente)                 â”‚   â”‚
â”‚  â”‚  - Recebe novos turnos quando escala Ã© aplicada     â”‚   â”‚
â”‚  â”‚  - ContÃ©m tag [TIPO] na descriÃ§Ã£o                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de Dados

### Criar Escala
```
UsuÃ¡rio preenche formulÃ¡rio
        â†“
JavaScript valida
        â†“
fetch POST /api/escala-especial/
        â†“
Backend valida novamente
        â†“
Cria registro em escala_especial
        â†“
Retorna 201 + dados
        â†“
JavaScript renderiza card
        â†“
Escala aparece na lista
```

### Aplicar Escala
```
UsuÃ¡rio clica "Aplicar"
        â†“
ConfirmaÃ§Ã£o JavaScript
        â†“
fetch POST /api/escala-especial/aplicar/{id}
        â†“
Backend obtÃ©m escala
        â†“
Determina colaboradores (por critÃ©rio)
        â†“
Para cada dia do perÃ­odo:
  - Para cada colaborador:
    - Verifica turno existente
    - Cria ou atualiza shift
        â†“
Retorna 200 + quantidade
        â†“
JavaScript mostra sucesso
        â†“
Abas atualizadas
```

### Remover AplicaÃ§Ã£o
```
UsuÃ¡rio clica "Remover"
        â†“
ConfirmaÃ§Ã£o JavaScript
        â†“
fetch POST /api/escala-especial/remover/{id}
        â†“
Backend obtÃ©m escala
        â†“
Determina colaboradores
        â†“
Para cada dia/colaborador:
  - Encontra turno com tag [TIPO]
  - Deleta shift
        â†“
Retorna 200 + quantidade
        â†“
JavaScript mostra sucesso
```

## ğŸ“ˆ CritÃ©rios de AtribuiÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CritÃ©rio: TODOS                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Seleciona: Todos colaboradores ativos  â”‚
â”‚  Exemplo: Limpeza geral                 â”‚
â”‚  FÃ³rmula: Collaborator.ativo = true     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CritÃ©rio: POR_EQUIPE                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Seleciona: Uma equipe especÃ­fica       â”‚
â”‚  Exemplo: Carnaval turma A              â”‚
â”‚  FÃ³rmula: Collaborator.setor_id = x     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CritÃ©rio: POR_NÃšMERO                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Seleciona: Primeiros N colaboradores   â”‚
â”‚  Exemplo: 5 pessoas para manutenÃ§Ã£o    â”‚
â”‚  FÃ³rmula: LIMIT numero_pessoas          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CritÃ©rio: MANUAL                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Seleciona: Pessoas especÃ­ficas         â”‚
â”‚  Exemplo: IDs [1, 3, 5, 7]              â”‚
â”‚  FÃ³rmula: WHERE id IN (...)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Tipos de Escala

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LIMPEZA (ğŸŸ¨ Amarelo)                        â”‚
â”‚ Limpeza fora do horÃ¡rio normal              â”‚
â”‚ Exemplo: Limpeza geral segunda-feira        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FERIADO (ğŸ”´ Vermelho)                       â”‚
â”‚ HorÃ¡rios redistribuÃ­dos para feriado        â”‚
â”‚ Exemplo: Carnaval com equipes divididas     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REDISTRIBUIÃ‡ÃƒO (ğŸ”µ Azul)                    â”‚
â”‚ RedistribuiÃ§Ã£o de horÃ¡rios                  â”‚
â”‚ Exemplo: MudanÃ§a de plantÃ£o                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EVENTO (ğŸŸ£ Roxo)                            â”‚
â”‚ Evento que afeta a escala                   â”‚
â”‚ Exemplo: Treinamento especial               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MANUTENÃ‡ÃƒO (ğŸŸ  Laranja)                     â”‚
â”‚ PerÃ­odo de manutenÃ§Ã£o/parada                â”‚
â”‚ Exemplo: Parada de manutenÃ§Ã£o               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OUTRO (âš« Cinza)                             â”‚
â”‚ Outro tipo de escala especial               â”‚
â”‚ Exemplo: Caso nÃ£o-categorizado              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ ValidaÃ§Ãµes

```
Entrada de UsuÃ¡rio
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ValidaÃ§Ã£o Frontend        â”‚
â”‚  - Required fields          â”‚
â”‚  - Email format             â”‚
â”‚  - Date logic               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“ (OK)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ValidaÃ§Ã£o Backend         â”‚
â”‚  - Tipos vÃ¡lidos            â”‚
â”‚  - Datas lÃ³gicas            â”‚
â”‚  - CritÃ©rio existe          â”‚
â”‚  - Recursos existem         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“ (OK)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ValidaÃ§Ã£o BD              â”‚
â”‚  - Foreign keys             â”‚
â”‚  - Not null constraints     â”‚
â”‚  - Triggers (se houver)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“ (OK)
GravaÃ§Ã£o no Banco
```

## ğŸ” SeguranÃ§a

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     AUTENTICAÃ‡ÃƒO & AUTORIZAÃ‡ÃƒO           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ @login_required em todas as rotas     â”‚
â”‚ âœ“ Flask-Login gerencia sessÃ£o           â”‚
â”‚ âœ“ Sem tokens expostos no frontend       â”‚
â”‚ âœ“ SQLAlchemy previne SQL injection      â”‚
â”‚ âœ“ Content-Type validado                 â”‚
â”‚ âœ“ Entrada sanitizada                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Fluxo de InstalaÃ§Ã£o

```
1. CÃ³digo Implementado
   â””â”€ models.py
   â””â”€ routes/escala_especial.py
   â””â”€ templates/escala_especial.html
   â””â”€ __init__.py (modificado)

2. Executar MigraÃ§Ã£o
   â””â”€ python 2026_01_22_create_escala_especial.py
   â””â”€ Tabela criada âœ“

3. Registrar Blueprints
   â””â”€ import em __init__.py âœ“
   â””â”€ register_blueprint() âœ“

4. Acessar
   â””â”€ http://localhost:5000/escala-especial/

5. Usar
   â””â”€ Criar escala âœ“
   â””â”€ Aplicar escala âœ“
   â””â”€ Verificar turnos âœ“
```

## ğŸ“Š Exemplo de Registro

```json
{
  "id": 1,
  "nome": "Limpeza Geral",
  "descricao": "Limpeza especial de segunda-feira",
  "tipo": "limpeza",
  "data_inicio": "2026-02-02",
  "data_fim": "2026-02-02",
  "turno_customizado": "06:00-14:00",
  "criterio_atribuicao": "todos",
  "equipe_id": null,
  "numero_pessoas": null,
  "colaboradores_selecionados": null,
  "ativo": true,
  "criado_em": "2026-01-22T10:30:00",
  "atualizado_em": "2026-01-22T10:30:00",
  "criado_por": "admin"
}
```

## ğŸ¯ Casos de Uso Mapeados

```
â”Œâ”€ Limpeza Especial
â”‚  â”œâ”€ Segunda-feira: Todos
â”‚  â”œâ”€ Turno: 06:00-14:00
â”‚  â””â”€ PeriÃ³dico: Semanal
â”‚
â”œâ”€ Feriado
â”‚  â”œâ”€ Carnaval: Equipe A (08:00-16:00)
â”‚  â”œâ”€ Carnaval: Equipe B (14:00-22:00)
â”‚  â””â”€ PeriÃ³dico: Anual
â”‚
â”œâ”€ Treinamento
â”‚  â”œâ”€ Grupo selecionado: [1,3,5,7]
â”‚  â”œâ”€ Turno: 14:00-18:00
â”‚  â””â”€ Uma vez
â”‚
â”œâ”€ ManutenÃ§Ã£o
â”‚  â”œâ”€ Por nÃºmero: 5 pessoas
â”‚  â”œâ”€ PerÃ­odo: 3 dias
â”‚  â””â”€ Turnos: N/A
â”‚
â””â”€ RedistribuiÃ§Ã£o
   â”œâ”€ Por equipe: Setor X
   â”œâ”€ Nova distribuiÃ§Ã£o
   â””â”€ PeriÃ³dico: Mensal
```

## âœ¨ Destaques TÃ©cnicos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PONTOS FORTES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ¨ 4 critÃ©rios flexÃ­veis de atribuiÃ§Ã£o  â”‚
â”‚ âœ¨ Suporta perÃ­odo multi-dia            â”‚
â”‚ âœ¨ Sem duplicaÃ§Ã£o de turnos             â”‚
â”‚ âœ¨ Rastreamento automÃ¡tico              â”‚
â”‚ âœ¨ UI responsiva e intuitiva            â”‚
â”‚ âœ¨ CÃ³digo bem documentado               â”‚
â”‚ âœ¨ Testes abrangentes                   â”‚
â”‚ âœ¨ Pronto para escala                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Status Atual

```
Status: âœ… PRONTO PARA TESTES

Tarefas Completadas:
âœ“ Modelo implementado
âœ“ Rotas criadas
âœ“ Frontend desenvolvido
âœ“ IntegraÃ§Ã£o com BD
âœ“ DocumentaÃ§Ã£o
âœ“ Exemplos

PrÃ³ximos Passos:
â†’ Executar migraÃ§Ã£o
â†’ Testar criar escala
â†’ Testar aplicar
â†’ Verificar turnos
â†’ Deploy (opcional)
```

---

Documento visual criado: 22/01/2026
VersÃ£o: v2.8.0+
Status: âœ… COMPLETO
